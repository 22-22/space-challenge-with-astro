---
import Header from "../../components/Header.astro";
import BaseLayout from "../../layouts/BaseLayout.astro";
import mobileBg from "../../assets/destination/background-destination-mobile.jpg";
import tabletBg from "../../assets/destination/background-destination-tablet.jpg";
import desktopBg from "../../assets/destination/background-destination-desktop.jpg";
import { planetsData } from "../../constants";

export function getStaticPaths() {
  return planetsData.map((planet) => {
    return {
      params: { destination: planet.name },
      props: planet,
    };
  });
}

const { destination } = Astro.params;
const { name, description, distance, travelTime, image } = Astro.props;

const links = planetsData.map((planet) => ({
  name: planet.name,
  href: `/destination/${planet.name}`,
}));

const pageTitle = "Destination";
---

<BaseLayout pageTitle={pageTitle}>
  <picture>
    <source srcset={desktopBg.src} media="(min-width: 768px)" />
    <source srcset={tabletBg.src} media="(min-width: 640px)" />
    <img
      src={mobileBg.src}
      alt="outer space"
      class="fixed inset-0 w-full h-full object-cover -z-10"
      fetchpriority="high"
    />
  </picture>
  <Header />
  <main class="md:max-w-3/4 mx-auto p-6 sm:p-10 md:px-0 text-white">
    <h2
      class="mb-10 md:mb-20 text-center sm:text-left sm:text-xl md:text-3xl font-barlow-condensed tracking-[2px] uppercase"
    >
      <span class="mr-4 text-blue-100/50 font-bold">01</span>Pick your
      destination
    </h2>
    <div class="flex flex-col md:flex-row items-center gap-12">
      <div class="flex-1">
        <img
          src={image.src}
          class="w-[150px] sm:w-[300px] md:w-[480px] aspect-square"
          alt={destination}
        />
      </div>
      <div class="flex flex-1 flex-col items-center md:items-start">
        <ul
          class="flex gap-6 md:gap-9 md:mb-6 font-barlow-condensed tracking-[2px] uppercase text-blue-100"
        >
          {
            links.map((link) => {
              const isActive =
                link.name.toLowerCase() === destination.toLowerCase();
              return (
                <li class="group">
                  <a
                    href={link.href}
                    aria-current={isActive ? "page" : undefined}
                  >
                    {link.name}
                  </a>
                  <div
                    class={`${isActive ? "border-b-2 border-white" : ""} min-h-2 group-hover:border-b-2 group-hover:border-white/40`}
                  />
                </li>
              );
            })
          }
        </ul>
        <h1
          data-name={name}
          class="my-6 text-6xl sm:text-7xl md:text-8xl font-bellefair uppercase"
        >
          {name}
        </h1>
        <p
          class="mb-10 text-base/7 md:text-lg/8 font-barlow text-blue-100 text-center md:text-left text-balance"
        >
          {description}
        </p>
        <div class="w-full border border-blue-100/50"></div>
        <div
          class="mt-6 md:mt-10 grid gap-6 grid-cols-1 sm:grid-cols-2 text-center md:text-left"
        >
          <div>
            <p
              class="mb-3 text-sm font-barlow-condensed tracking-[2px] uppercase text-blue-100"
            >
              Avg. distance
            </p>
            <p class="text-[28px] font-bellefair uppercase">{distance}</p>
          </div>
          <div>
            <p
              class="mb-3 text-sm font-barlow-condensed tracking-[2px] uppercase text-blue-100"
            >
              Est. travel time
            </p>
            <p class="text-[28px] font-bellefair uppercase">{travelTime}</p>
          </div>
        </div>
      </div>
    </div>
  </main>
</BaseLayout>
